{"version":3,"sources":["UserPool.tsx","components/Account.js","components/Signup.tsx","components/Login.tsx","components/Status.js","components/ChangePassword.js","components/ChangeEmail.js","components/ChangeUsername.js","components/Settings.js","components/ForgotPassword.js","components/Attributes.js","components/RandomNumber.js","App.tsx","reportWebVitals.js","index.js"],"names":["CognitoUserPool","UserPoolId","ClientId","AccountContext","createContext","Account","props","useState","status","setStatus","useEffect","getSession","then","session","a","Promise","resolve","reject","user","Pool","getCurrentUser","err","getUserAttributes","attributes","results","attribute","Name","Value","token","getIdToken","getJwtToken","headers","Authorization","authenticate","Username","Password","CognitoUser","authDetails","AuthenticationDetails","authenticateUser","onSuccess","data","console","log","onFailure","error","newPasswordRequired","Provider","value","logout","signOut","children","App","username","setUsername","email","setEmail","password","setPassword","onSubmit","event","preventDefault","UserPool","signUp","CognitoUserAttribute","onChange","target","type","useContext","catch","Status","onClick","ChangePassword","newPassword","setNewPassword","changePassword","result","ChangeEmail","newEmail","setNewEmail","updateAttributes","ChangeUsername","newUsername","setNewUsername","Settings","ForgotPassword","stage","setStage","code","setCode","confirmPassword","setConfirmPassword","getUser","toLowerCase","forgotPassword","inputVerificationCode","Attributes","plan","setPlan","RandomNumber","number","setNumber","fetchNumber","fetch","response","json","Signup","Login","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d43ffb7e.chunk.js","sourcesContent":["import {\r\n  CognitoUserPool,\r\n  // CognitoUserAttribute,\r\n} from \"amazon-cognito-identity-js\";\r\n\r\nconst poolData = {\r\n  UserPoolId: \"eu-west-2_Cv2kBw6cS\",\r\n  ClientId: \"41dj7de1t0qrns7mj8h1n57qfs\",\r\n};\r\n\r\nexport default new CognitoUserPool(poolData);\r\n","import React, { createContext, useState, useEffect } from \"react\";\r\nimport { CognitoUser, AuthenticationDetails } from \"amazon-cognito-identity-js\";\r\nimport Pool from \"../UserPool\";\r\n\r\nconst AccountContext = createContext();\r\n\r\nconst Account = (props) => {\r\n  const [status, setStatus] = useState(false);\r\n\r\n  useEffect(() => {\r\n    getSession().then((session) => {\r\n      setStatus(true);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const getSession = async () =>\r\n    await new Promise((resolve, reject) => {\r\n      const user = Pool.getCurrentUser();\r\n      if (user) {\r\n        user.getSession(async (err, session) => {\r\n          if (err) {\r\n            reject();\r\n          } else {\r\n            const attributes = await new Promise((resolve, reject) => {\r\n              user.getUserAttributes((err, attributes) => {\r\n                if (err) {\r\n                  reject(err);\r\n                } else {\r\n                  const results = {};\r\n\r\n                  for (let attribute of attributes) {\r\n                    const { Name, Value } = attribute;\r\n                    results[Name] = Value;\r\n                  }\r\n\r\n                  resolve(results);\r\n                }\r\n              });\r\n            });\r\n\r\n            const token = session.getIdToken().getJwtToken();\r\n\r\n            resolve({\r\n              user,\r\n              headers: { Authorization: token },\r\n              ...session,\r\n              ...attributes,\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        reject();\r\n      }\r\n    });\r\n\r\n  const authenticate = async (Username, Password) =>\r\n    await new Promise((resolve, reject) => {\r\n      const user = new CognitoUser({ Username, Pool });\r\n\r\n      const authDetails = new AuthenticationDetails({ Username, Password });\r\n\r\n      user.authenticateUser(authDetails, {\r\n        onSuccess: (data) => {\r\n          console.log(\"onSuccess:\", data);\r\n          resolve(data);\r\n        },\r\n\r\n        onFailure: (err) => {\r\n          console.error(\"onFailure:\", err);\r\n          reject(err);\r\n        },\r\n\r\n        newPasswordRequired: (data) => {\r\n          console.log(\"newPasswordRequired:\", data);\r\n          resolve(data);\r\n        },\r\n      });\r\n    });\r\n\r\n  const logout = () => {\r\n    const user = Pool.getCurrentUser();\r\n    if (user) {\r\n      user.signOut();\r\n      setStatus(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AccountContext.Provider\r\n      value={{ authenticate, getSession, logout, status, setStatus }}\r\n    >\r\n      {props.children}\r\n    </AccountContext.Provider>\r\n  );\r\n};\r\n\r\nexport { Account, AccountContext };\r\n","import React, { useState } from \"react\";\r\nimport { CognitoUserAttribute } from \"amazon-cognito-identity-js\";\r\nimport UserPool from \"../UserPool\";\r\n\r\nfunction App() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n\r\n    UserPool.signUp(\r\n      username,\r\n      password,\r\n      [new CognitoUserAttribute({ Name: \"email\", Value: email })],\r\n      [],\r\n      (err, data) => {\r\n        if (err) console.log(err);\r\n        console.log(data);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          value={username}\r\n          onChange={(event) => setUsername(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={email}\r\n          onChange={(event) => setEmail(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">Signup</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nfunction App() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { authenticate, setStatus } = useContext(AccountContext);\r\n\r\n  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n\r\n    authenticate(username, password)\r\n      .then((data: any) => {\r\n        console.log(\"Logged in!\", data);\r\n        setStatus(true);\r\n      })\r\n      .catch((err: any) => {\r\n        console.error(\"Failed to login!\", err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          value={username}\r\n          onChange={(event) => setUsername(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React, { useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nconst Status = () => {\r\n  const { logout, status } = useContext(AccountContext);\r\n\r\n  return (\r\n    <div>\r\n      {status ? (\r\n        <div>\r\n          You are logged in. <button onClick={logout}>Logout</button>\r\n        </div>\r\n      ) : (\r\n        \"Please login below\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Status;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nconst ChangePassword = () => {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n\r\n  const { getSession, authenticate } = useContext(AccountContext);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    getSession()\r\n      .then(({ user }) => {\r\n        //authenticate\r\n        authenticate(user.username, password)\r\n          .then(() => {\r\n            //change password\r\n            user.changePassword(password, newPassword, (err, result) => {\r\n              if (err) console.error(err);\r\n              console.log(result);\r\n            });\r\n          })\r\n          .catch((err) => console.error(err));\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={newPassword}\r\n          onChange={(event) => setNewPassword(event.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">Change password</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\nimport { CognitoUserAttribute } from \"amazon-cognito-identity-js\";\r\n\r\nconst ChangeEmail = () => {\r\n  const [newEmail, setNewEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { getSession, authenticate } = useContext(AccountContext);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    getSession()\r\n      .then(({ user }) => {\r\n        //authenticate\r\n        authenticate(user.username, password)\r\n          .then(() => {\r\n            // change email\r\n            const attributes = [\r\n              new CognitoUserAttribute({ Name: \"email\", Value: newEmail }),\r\n            ];\r\n\r\n            user.updateAttributes(attributes, (err, results) => {\r\n              if (err) console.error(err);\r\n              console.log(results);\r\n            });\r\n          })\r\n          .catch((err) => console.error(err));\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          value={newEmail}\r\n          onChange={(event) => setNewEmail(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">Change email</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeEmail;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\nimport { CognitoUserAttribute } from \"amazon-cognito-identity-js\";\r\n\r\nconst ChangeUsername = () => {\r\n  const [newUsername, setNewUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { getSession, authenticate } = useContext(AccountContext);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    getSession()\r\n      .then(({ user }) => {\r\n        //authenticate\r\n        authenticate(user.username, password)\r\n          .then(() => {\r\n            // change username\r\n            const attributes = [\r\n              new CognitoUserAttribute({\r\n                Name: \"username\",\r\n                Value: newUsername,\r\n              }),\r\n            ];\r\n\r\n            user.updateAttributes(attributes, (err, results) => {\r\n              if (err) console.error(err);\r\n              console.log(results);\r\n            });\r\n          })\r\n          .catch((err) => console.error(err));\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          value={newUsername}\r\n          onChange={(event) => setNewUsername(event.target.value)}\r\n        />\r\n\r\n        <input\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">Change username</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeUsername;\r\n","import React, { useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\nimport ChangePassword from \"./ChangePassword\";\r\nimport ChangeEmail from \"./ChangeEmail\";\r\nimport ChangeUsername from \"./ChangeUsername\";\r\n\r\nconst Settings = () => {\r\n  // const [loggedIn, setLoggedIn] = useState(false);\r\n\r\n  const { status } = useContext(AccountContext);\r\n\r\n  // useEffect(() => {\r\n  //   getSession()\r\n  //     .then(() => {\r\n  //       setLoggedIn(true);\r\n  //     })\r\n  //     .catch(() => {\r\n  //       // go to login page\r\n  //     });\r\n  // }, []);\r\n\r\n  return (\r\n    <div>\r\n      {status && (\r\n        <>\r\n          <h1>Settings</h1>\r\n          <ChangePassword />\r\n          <ChangeEmail />\r\n          <ChangeUsername />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import React, { useState } from \"react\";\r\nimport { CognitoUser } from \"amazon-cognito-identity-js\";\r\nimport Pool from \"../UserPool\";\r\n\r\nconst ForgotPassword = () => {\r\n  const [stage, setStage] = useState(1); // 1 = email stage, 2 = code stage\r\n  const [email, setEmail] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  const getUser = () => {\r\n    return new CognitoUser({\r\n      Username: email.toLowerCase(),\r\n      Pool,\r\n    });\r\n  };\r\n\r\n  const sendCode = (event) => {\r\n    event.preventDefault();\r\n\r\n    getUser().forgotPassword({\r\n      onSuccess: (data) => {\r\n        console.log(\"onSuccess:\", data);\r\n      },\r\n      onFailure: (err) => {\r\n        console.log(\"onFailure:\", err);\r\n      },\r\n      inputVerificationCode: (data) => {\r\n        console.log(\"Input code:\", data);\r\n        setStage(2);\r\n      },\r\n    });\r\n  };\r\n\r\n  const resetPassword = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (password !== confirmPassword) {\r\n      console.error(\"Passwords are not the same\");\r\n      return;\r\n    }\r\n\r\n    getUser().confirmPassword(code, password, {\r\n      onSuccess: (data) => {\r\n        console.log(\"onSuccess:\", data);\r\n      },\r\n      onFailure: (err) => {\r\n        console.error(\"onFailure:\", err);\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {stage === 1 && (\r\n        <form onSubmit={sendCode}>\r\n          <input\r\n            value={email}\r\n            onChange={(event) => setEmail(event.target.value)}\r\n          />\r\n          <button type=\"submit\">Send verification code</button>\r\n        </form>\r\n      )}\r\n\r\n      {stage === 2 && (\r\n        <form onSubmit={resetPassword}>\r\n          <input\r\n            value={code}\r\n            onChange={(event) => setCode(event.target.value)}\r\n          />\r\n\r\n          <input\r\n            value={password}\r\n            onChange={(event) => setPassword(event.target.value)}\r\n          />\r\n\r\n          <input\r\n            value={confirmPassword}\r\n            onChange={(event) => setConfirmPassword(event.target.value)}\r\n          />\r\n\r\n          <button type=\"submit\">Change password</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { CognitoUserAttribute } from \"amazon-cognito-identity-js\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nconst Attributes = () => {\r\n  const [plan, setPlan] = useState(\"\");\r\n\r\n  const { getSession } = useContext(AccountContext);\r\n\r\n  useEffect(() => {\r\n    // Fetch current plan from cognito\r\n    getSession().then((data) => {\r\n      setPlan(data[\"custom:plan\"]);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    // Update plan on cognito\r\n    getSession().then(({ user }) => {\r\n      const attributes = [\r\n        new CognitoUserAttribute({ Name: \"custom:plan\", Value: plan }),\r\n      ];\r\n\r\n      user.updateAttributes(attributes, (err, result) => {\r\n        if (err) console.error(err);\r\n        console.log(result);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Update your plan:</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <input value={plan} onChange={(event) => setPlan(event.target.value)} />\r\n\r\n        <button type=\"submit\">Change plan</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Attributes;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nconst RandomNumber = () => {\r\n  const [number, setNumber] = useState(0);\r\n\r\n  const { getSession } = useContext(AccountContext);\r\n\r\n  const fetchNumber = async () => {\r\n    getSession().then(async ({ headers }) => {\r\n      const url =\r\n        \"https://wvv2lnqscf.execute-api.eu-west-2.amazonaws.com/dev/random-number?min=1&max=100\";\r\n\r\n      const data = await fetch(url, { headers })\r\n        .then((response) => response.json())\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n\r\n      setNumber(data);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>Random number: {number}</div>\r\n      <button onClick={fetchNumber}>Fetch new number</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RandomNumber;\r\n","import React from \"react\";\nimport { Account } from \"./components/Account\";\nimport Signup from \"./components/Signup\";\nimport Login from \"./components/Login\";\nimport Status from \"./components/Status\";\nimport Settings from \"./components/Settings\";\nimport ForgotPassword from \"./components/ForgotPassword\";\nimport Attributes from \"./components/Attributes\";\nimport RandomNumber from \"./components/RandomNumber\";\n\nconst App = () => {\n  return (\n    <Account>\n      <Status />\n      <Signup />\n      <Login />\n      <ForgotPassword />\n      <Settings />\n      <Attributes />\n      <RandomNumber />\n    </Account>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}